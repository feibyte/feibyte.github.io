<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="google-site-verification" content="aG_tXROG9wF9yK4g29KmnltUUXyLK5SBAWKIXDkz6vU"><title>How to prevent duplicate SQS messages - Fedeoo&#039;s Blog</title><link rel="manifest" href="/en/manifest.json"><meta name="application-name" content="Fedeoo&#039;s Blog"><meta name="msapplication-TileImage" content="/gallery/site/shark.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Fedeoo&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="ProblemIn our system, queue processors must implement idempotency to prevent the double-processing of messages. Duplicate messages may arise in the following scenarios:  Scheduler and Message Producer"><meta property="og:type" content="blog"><meta property="og:title" content="How to prevent duplicate SQS messages"><meta property="og:url" content="http://blog.feibyte.com/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/"><meta property="og:site_name" content="Fedeoo&#039;s Blog"><meta property="og:description" content="ProblemIn our system, queue processors must implement idempotency to prevent the double-processing of messages. Duplicate messages may arise in the following scenarios:  Scheduler and Message Producer"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://blog.feibyte.com/en/gallery/thumbnails/2024/sqs.png"><meta property="article:published_time" content="2024-05-10T21:52:05.000Z"><meta property="article:modified_time" content="2024-05-16T12:28:10.266Z"><meta property="article:author" content="Fedeoo"><meta property="article:tag" content="AWS"><meta property="article:tag" content="Serviceless"><meta property="article:tag" content="SQS Processor"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://blog.feibyte.com/en/gallery/thumbnails/2024/sqs.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.feibyte.com/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/"},"headline":"How to prevent duplicate SQS messages","image":["http://blog.feibyte.com/en/gallery/thumbnails/2024/sqs.png"],"datePublished":"2024-05-10T21:52:05.000Z","dateModified":"2024-05-16T12:28:10.266Z","author":{"@type":"Person","name":"Fedeoo"},"publisher":{"@type":"Organization","name":"Fedeoo's Blog","logo":{"@type":"ImageObject","url":"http://blog.feibyte.com/gallery/site/logo.png"}},"description":"ProblemIn our system, queue processors must implement idempotency to prevent the double-processing of messages. Duplicate messages may arise in the following scenarios:  Scheduler and Message Producer"}</script><link rel="canonical" href="http://blog.feibyte.com/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/"><link rel="icon" href="/en/gallery/site/shark.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/en/css/default.css"><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-773NDPTQE0" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-773NDPTQE0');</script><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/en/"><img src="/en/gallery/site/logo.png" alt="Fedeoo&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/en/">Home</a><a class="navbar-item" href="/en/archives">Archives</a><a class="navbar-item" href="/en/categories">Categories</a><a class="navbar-item" href="/en/tags">Tags</a><a class="navbar-item" href="/en/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="简体中文" href="https://blog.feibyte.com/">简体中文</a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/feibyte/feibyte.github.io"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-10T21:52:05.000Z" title="11/05/2024, 7:52:05 am">2024-05-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-16T12:28:10.266Z" title="16/05/2024, 10:28:10 pm">2024-05-16</time></span><span class="level-item"><a class="link-muted" href="/en/categories/Explorations/">Explorations</a></span><span class="level-item">4 minutes read (About 551 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">How to prevent duplicate SQS messages</h1><div class="content"><h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>In our system, queue processors must implement idempotency to prevent the double-processing of messages. Duplicate messages may arise in the following scenarios:</p>
<ol>
<li><p><strong>Scheduler and Message Producer</strong>: The scheduler or message producer may be triggered multiple times, occasionally rerunning due to timeouts.</p>
</li>
<li><p><strong>Queue Management</strong>: If a lambda instance times out while processing a message, another instance may retrieve the same message if the visibility timeout is not properly set.</p>
</li>
</ol>
<p>This can have terrible consequences. We aim to avoid sending duplicate emails or messages to our customers, not to mention inadvertently delivering duplicate gift cards.</p>
<p>So a generic idempotency mechanism is required.</p>
<span id="more"></span>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>The idea is straightforward: we will use a DynamoDB &#x2F; Redis cache to store the message ID and the processing status. When a message is received, we will check the record to see if it has been processed. If it has, we will skip the message. If not, we will process it and update the cache. Considering our serverless architecture, DynamoDB is selected.</p>
<p>Basically, there are three cases:</p>
<ol>
<li>Message first time processed:  process the message.</li>
<li>Message is being processed or has been processed: discard the message.</li>
<li>Message processing failed: reprocess the message.<br>To handle this case, we need to add a lock timeout to the record. If the message is still in processing status after the lock timeout, we give it another chance to be processed.</li>
</ol>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><ol>
<li>Create a DynamoDB table <code>message-processor</code>. It’s a normal table with a primary key <code>messageId</code>.</li>
<li>Implement a service with this interface:<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IMessageProcessorService</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Here use DynamoDB message-processor table as the fact store to decide if a message has been seen before</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> messageId unique identifier for each message</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> lockTimeoutInSeconds how long to lock the message for processing. It gives another chance to reprocess the message if it fails.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns</span> boolean: true indicates the lock is acquired and should continue the processing.</span></span><br><span class="line"><span class="comment">   *                   false indicates the message is already being processed or being processed by another instance.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">acquireProcessingLock</span>(<span class="attr">messageId</span>: <span class="built_in">string</span>, <span class="attr">lockTimeoutInSeconds</span>: <span class="built_in">number</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">boolean</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Mark the message as processed, preventing it from being processed again</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> <span class="variable">messageId</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">markMessageProcessed</span>(<span class="attr">messageId</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Remove record of failed message processing, allowing it to be processed again</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> <span class="variable">messageId</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">releaseProcessingLock</span>(<span class="attr">messageId</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>The code snippet below shows how to implement the <code>acquireProcessingLock</code> method:<br>(Never mind, we’re using internal libraries to simplify the code)</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">store</span>.<span class="title function_">replace</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">_id</span>: id,</span><br><span class="line">    <span class="attr">status</span>: <span class="string">&#x27;PROCESSING&#x27;</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">condition</span>: &#123;</span><br><span class="line">      <span class="attr">$or</span>: [</span><br><span class="line">        &#123; <span class="attr">_id</span>: &#123; <span class="attr">$exists</span>: <span class="literal">false</span> &#125; &#125;, <span class="comment">// insert new record</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">$and</span>: [</span><br><span class="line">            &#123; <span class="attr">timestamp</span>: &#123; <span class="attr">$lt</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>() - lockTimeoutInSeconds * <span class="number">1000</span> &#125; &#125;,</span><br><span class="line">            &#123; <span class="attr">status</span>: &#123; <span class="attr">$eq</span>: <span class="string">&#x27;PROCESSING&#x27;</span> &#125; &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>At last, we enhance the existing message handler with the idempotency mechanism:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> makeHandlerIdempotent = <span class="keyword">async</span> &lt;T&gt;(</span><br><span class="line">  <span class="attr">handler</span>: <span class="title class_">MessageHandler</span>&lt;T&gt;,</span><br><span class="line">  <span class="title class_">IdGenerator</span>: <span class="function">(<span class="params">message: T</span>) =&gt;</span> <span class="built_in">string</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    messageProcessorService,</span><br><span class="line">    lockTimeoutInSeconds,</span><br><span class="line">    logger,</span><br><span class="line">  &#125;: &#123;</span><br><span class="line">    <span class="attr">logger</span>: <span class="title class_">ILoggerService</span>;</span><br><span class="line">    <span class="attr">messageProcessorService</span>: <span class="title class_">IMessageProcessorService</span>;</span><br><span class="line">    <span class="attr">lockTimeoutInSeconds</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">): <span class="title class_">Promise</span>&lt;<span class="title class_">MessageHandler</span>&lt;T&gt;&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (<span class="attr">message</span>: T) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="title class_">IdGenerator</span>(message);</span><br><span class="line">    <span class="keyword">const</span> acquiredProcessingExclusiveLock = <span class="keyword">await</span> messageProcessorService.<span class="title function_">acquireProcessingLock</span>(</span><br><span class="line">      id,</span><br><span class="line">      lockTimeoutInSeconds,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (!acquiredProcessingExclusiveLock) &#123;</span><br><span class="line">      logger.<span class="title function_">info</span>(<span class="string">&#x27;processMessageIdempotent: message has already been processed&#x27;</span>, &#123; message &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">handler</span>(message);</span><br><span class="line">      <span class="keyword">await</span> messageProcessorService.<span class="title function_">markMessageProcessed</span>(id);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">await</span> messageProcessorService.<span class="title function_">releaseProcessingLock</span>(id);</span><br><span class="line">      <span class="keyword">throw</span> error;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>It seems preventing duplicate messages in a distributed system is likely a common requirement.<br>While implementing this idempotency mechanism, I found almost similar solution discussed <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/23260024/how-to-prevent-duplicate-sqs-messages">How to prevent duplicate SQS Messages?</a>.<br>It was very helpful and offered clear explanations.</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/en/tags/AWS/">AWS</a><a class="link-muted mr-2" rel="tag" href="/en/tags/Serviceless/">Serviceless</a><a class="link-muted mr-2" rel="tag" href="/en/tags/SQS-Processor/">SQS Processor</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/en/2024/05/16/AWS-client-getaddrinfo-EMFILE-issue/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">AWS client getaddrinfo EMFILE issue</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/en/2020/02/14/novice/cache-memory-issue/"><span class="level-item">A bug which should have been solved a week ago</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://blog.feibyte.com/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/';
            this.page.identifier = '2024/05/11/How-to-prevent-duplicate-SQS-messages/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'blog-feibyte-com' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/en/gallery/site/shark.png" alt="Fedeoo"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Fedeoo</p><p class="is-size-6 is-block">Engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Sydney</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/en/archives"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/en/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/en/tags"><p class="title">12</p></a></div></div></nav></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/en/categories/Explorations/"><span class="level-start"><span class="level-item">Explorations</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/en/2024/06/02/DynamoDB%20single%20table%20design/"><img src="/en/gallery/thumbnails/2024/dynamodb.png" alt="DynamoDB the Advantages and Considerations of Single Table Design"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-06-02T11:22:56.000Z">2024-06-02</time></p><p class="title"><a href="/en/2024/06/02/DynamoDB%20single%20table%20design/">DynamoDB the Advantages and Considerations of Single Table Design</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/21/AWS-connect-last-agent-call-routing/"><img src="/en/gallery/thumbnails/2024/call-center.png" alt="AWS connect last agent call routing"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-21T11:22:56.000Z">2024-05-21</time></p><p class="title"><a href="/en/2024/05/21/AWS-connect-last-agent-call-routing/">AWS connect last agent call routing</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/16/AWS-client-getaddrinfo-EMFILE-issue/"><img src="/en/gallery/thumbnails/aws/lambda.png" alt="AWS client getaddrinfo EMFILE issue"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-16T13:17:22.000Z">2024-05-16</time></p><p class="title"><a href="/en/2024/05/16/AWS-client-getaddrinfo-EMFILE-issue/">AWS client getaddrinfo EMFILE issue</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/"><img src="/en/gallery/thumbnails/2024/sqs.png" alt="How to prevent duplicate SQS messages"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-10T21:52:05.000Z">2024-05-11</time></p><p class="title"><a href="/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/">How to prevent duplicate SQS messages</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2020/02/14/novice/cache-memory-issue/"><img src="/en/gallery/thumbnails/troubleshooting.jpg" alt="A bug which should have been solved a week ago"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-02-14T11:05:00.000Z">2020-02-14</time></p><p class="title"><a href="/en/2020/02/14/novice/cache-memory-issue/">A bug which should have been solved a week ago</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/en/tags/Serviceless/"><span class="tag">Serviceless</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/AWS/"><span class="tag">AWS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/FE/"><span class="tag">FE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Client/"><span class="tag">Client</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Amazon-connect/"><span class="tag">Amazon connect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/DynamoDB/"><span class="tag">DynamoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/SQS-Processor/"><span class="tag">SQS Processor</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Auth0/"><span class="tag">Auth0</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/en/"><img src="/en/gallery/site/logo.png" alt="Fedeoo&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Fedeoo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/en/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/en/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/en/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/en/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/en/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>