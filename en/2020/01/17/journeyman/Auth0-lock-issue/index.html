<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="google-site-verification" content="aG_tXROG9wF9yK4g29KmnltUUXyLK5SBAWKIXDkz6vU"><title>Auth0 lock issue - Fedeoo&#039;s Blog</title><link rel="manifest" href="/en/manifest.json"><meta name="application-name" content="Fedeoo&#039;s Blog"><meta name="msapplication-TileImage" content="/gallery/site/shark.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Fedeoo&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="This Friday when we’re demo case, we noticed that it took a long time to display content on the Home page.  It happened occasionally and soon we found it happened only when we had login into ULP but n"><meta property="og:type" content="blog"><meta property="og:title" content="Auth0 lock issue"><meta property="og:url" content="http://blog.feibyte.com/en/2020/01/17/journeyman/Auth0-lock-issue/"><meta property="og:site_name" content="Fedeoo&#039;s Blog"><meta property="og:description" content="This Friday when we’re demo case, we noticed that it took a long time to display content on the Home page.  It happened occasionally and soon we found it happened only when we had login into ULP but n"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://blog.feibyte.com/en/gallery/thumbnails/mutex.png"><meta property="article:published_time" content="2020-01-17T12:11:42.000Z"><meta property="article:modified_time" content="2024-05-16T12:28:26.278Z"><meta property="article:author" content="Fedeoo"><meta property="article:tag" content="FE"><meta property="article:tag" content="Auth0"><meta property="article:tag" content="Lock"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://blog.feibyte.com/en/gallery/thumbnails/mutex.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.feibyte.com/en/2020/01/17/journeyman/Auth0-lock-issue/"},"headline":"Auth0 lock issue","image":["http://blog.feibyte.com/en/gallery/thumbnails/mutex.png"],"datePublished":"2020-01-17T12:11:42.000Z","dateModified":"2024-05-16T12:28:26.278Z","author":{"@type":"Person","name":"Fedeoo"},"publisher":{"@type":"Organization","name":"Fedeoo's Blog","logo":{"@type":"ImageObject","url":"http://blog.feibyte.com/gallery/site/logo.png"}},"description":"This Friday when we’re demo case, we noticed that it took a long time to display content on the Home page.  It happened occasionally and soon we found it happened only when we had login into ULP but n"}</script><link rel="canonical" href="http://blog.feibyte.com/en/2020/01/17/journeyman/Auth0-lock-issue/"><link rel="icon" href="/en/gallery/site/shark.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/en/css/default.css"><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-773NDPTQE0" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-773NDPTQE0');</script><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/en/"><img src="/en/gallery/site/logo.png" alt="Fedeoo&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/en/">Home</a><a class="navbar-item" href="/en/archives">Archives</a><a class="navbar-item" href="/en/categories">Categories</a><a class="navbar-item" href="/en/tags">Tags</a><a class="navbar-item" href="/en/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="简体中文" href="https://blog.feibyte.com/">简体中文</a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/feibyte/feibyte.github.io"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-01-17T12:11:42.000Z" title="17/01/2020, 11:11:42 pm">2020-01-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-05-16T12:28:26.278Z" title="16/05/2024, 10:28:26 pm">2024-05-16</time></span><span class="level-item"><a class="link-muted" href="/en/categories/Explorations/">Explorations</a></span><span class="level-item">5 minutes read (About 750 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Auth0 lock issue</h1><div class="content"><p>This Friday when we’re demo case, we noticed that it took a long time to display content on the Home page.  It happened occasionally and soon we found it happened only when we had login into ULP but not the HOME page.  Particularly, if you remove the cookie flag auth0.is.authenticated and refresh the page, you can reproduce it. You might have to wait for more than 10s.</p>
<span id="more"></span>

<h2 id="Reproduce-and-address-potential-code"><a href="#Reproduce-and-address-potential-code" class="headerlink" title="Reproduce and address potential code"></a>Reproduce and address potential code</h2><p>The first step is to check the network activity.  The weird thing was: we got token at 1s roughly and it took about 100ms but the first GraphQL request was started at 11s.  At first, I guessed probably it was blocked by some requests as there were so many requests online. The good thing is we could reproduce it locally. It proved that my guess was wrong after removing all unimportant requests. </p>
<p>Then I began to log some methods with performance.mark and performance.measure. Soon we find the issue was caused by getTokenSilently API. It took more than 5s even the Network showed it took only 100ms. </p>
<h2 id="Look-into-SDK"><a href="#Look-into-SDK" class="headerlink" title="Look into SDK"></a>Look into SDK</h2><p>Here’s what I found in that method:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">async</span> <span class="title function_">getTokenSilently</span>(<span class="params"></span>) &#123;</span><br><span class="line">  options.<span class="property">scope</span> = <span class="title function_">getUniqueScopes</span>(<span class="variable language_">this</span>.<span class="property">DEFAULT_SCOPE</span>, options.<span class="property">scope</span>);</span><br><span class="line">  <span class="keyword">await</span> lock.<span class="title function_">acquireLock</span>(<span class="variable constant_">GET_TOKEN_SILENTLY_LOCK_KEY</span>, <span class="number">5000</span>);</span><br><span class="line">  <span class="comment">// 20 lines code</span></span><br><span class="line">  lock.<span class="title function_">releaseLock</span>(<span class="variable constant_">GET_TOKEN_SILENTLY_LOCK_KEY</span>);</span><br><span class="line">  <span class="keyword">return</span> authResult.<span class="property">access_token</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>We notice they’re using a lock which is a fresh thing in the FE.  What if we get an exception, does it mean we have to wait for 5s? We might invoke this API a few times as we wanna always get a valid token.  It’s why the GraphQL request began at 11s. Let’s take a look at the source code and see if they fixed it.  Yeah, they were aware of that issue and had already fixed it.   And the new one looks like: </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> lock.<span class="title function_">acquireLock</span>(<span class="variable constant_">GET_TOKEN_SILENTLY_LOCK_KEY</span>, <span class="number">5000</span>);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> lock.<span class="title function_">releaseLock</span>(<span class="variable constant_">GET_TOKEN_SILENTLY_LOCK_KEY</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Let’s upgrade our package file and give it another try. 🎉<br>After a few moments ⏰. What? It still took 5s. Maybe I didn’t update the right one, double-double-check: we did have the new package. </p>
<p>There was something different:  The first GraphQL began at 7s. </p>
<h2 id="Understand-the-Lock-🔐"><a href="#Understand-the-Lock-🔐" class="headerlink" title="Understand the Lock 🔐"></a>Understand the Lock 🔐</h2><p>As we know, we don’t the lock API in FE(There’s an experimental API) They are using the browser-tabs-lock library.  It’s used for preventing two tabs send request parallel.  Basically, they’re using localStorage to implement the lock. Check if the Certain key is set in lcoalStorage, if not set it and acquire the lock successfully. Otherwise, listen to Storage’s event or wait until timeout.</p>
<p>After adding some log statements, I found there was an item in localStorage after redirecting back.  Auth page is unable to access it. Therefore, the only reason was we didn’t clean it before redirecting to the Auth page.  However, before redirect to the Auth page, there’s nothing on the localStorage.  </p>
<p>Here’s related code. Have you noticed the problem?</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAuthenticated = <span class="keyword">await</span> auth0FromHook.<span class="title function_">isAuthenticated</span>();</span><br><span class="line"><span class="keyword">if</span> (!isAuthenticated) &#123;</span><br><span class="line">  <span class="comment">// Checked there was no item on lcoalStorage</span></span><br><span class="line">  <span class="keyword">await</span> auth0FromHook.<span class="title function_">loginWithRedirect</span>(&#123;</span><br><span class="line">    <span class="attr">appState</span>: &#123; <span class="attr">targetUrl</span>: <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> &#125;,</span><br><span class="line">  &#125;); <span class="comment">// Using location.assign</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> token = <span class="keyword">await</span> auth0FromHook.<span class="title function_">getTokenSilently</span>();</span><br><span class="line"><span class="comment">// ... </span></span><br></pre></td></tr></table></figure>

<p>There’s nothing special with loginWithRedirect API.  The root cause is the script doesn’t stop after location change. The following code getTokenSilently is trying to acquire the lock but it doesn’t have a chance to release the lock as the location was changed. It’s hard to debug it because we can’t set a breakpoint or print any message after location change. </p>
<h2 id="Review-of-the-bug"><a href="#Review-of-the-bug" class="headerlink" title="Review of the bug"></a>Review of the bug</h2><p><strong>When was the issue introduced</strong></p>
<p>In the beginning,  we didn’t have this issue as the Auth0 was not using the lock. We upgraded the version to 1.5.0 on 13&#x2F;11&#x2F;2019.  It was a minor change and we didn’t notice that. That means we had that issue since then. </p>
<p><strong>Why there was no alert from NewRelic</strong></p>
<p>This bug happens occasionally. It might just have a minor impact on the average time. The page load time fluctuates every day and only keep one week’s data.  It might not be able to noticed in short term.</p>
<h2 id="Lesson-from-it"><a href="#Lesson-from-it" class="headerlink" title="Lesson from it"></a>Lesson from it</h2><p>Remember stop the script after location change.</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/en/tags/FE/">FE</a><a class="link-muted mr-2" rel="tag" href="/en/tags/Auth0/">Auth0</a><a class="link-muted mr-2" rel="tag" href="/en/tags/Lock/">Lock</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/en/2020/02/14/novice/cache-memory-issue/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">A bug which should have been solved a week ago</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/en/2019/08/25/journeyman/babel-polyfill-enigma/"><span class="level-item">Babel polyfill</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://blog.feibyte.com/en/2020/01/17/journeyman/Auth0-lock-issue/';
            this.page.identifier = '2020/01/17/journeyman/Auth0-lock-issue/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'blog-feibyte-com' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/en/gallery/site/shark.png" alt="Fedeoo"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Fedeoo</p><p class="is-size-6 is-block">Engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Sydney</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/en/archives"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/en/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/en/tags"><p class="title">12</p></a></div></div></nav></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/en/categories/Explorations/"><span class="level-start"><span class="level-item">Explorations</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/en/2024/06/02/DynamoDB%20single%20table%20design/"><img src="/en/gallery/thumbnails/2024/dynamodb.png" alt="DynamoDB the Advantages and Considerations of Single Table Design"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-06-02T11:22:56.000Z">2024-06-02</time></p><p class="title"><a href="/en/2024/06/02/DynamoDB%20single%20table%20design/">DynamoDB the Advantages and Considerations of Single Table Design</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/21/AWS-connect-last-agent-call-routing/"><img src="/en/gallery/thumbnails/2024/call-center.png" alt="AWS connect last agent call routing"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-21T11:22:56.000Z">2024-05-21</time></p><p class="title"><a href="/en/2024/05/21/AWS-connect-last-agent-call-routing/">AWS connect last agent call routing</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/16/AWS-client-getaddrinfo-EMFILE-issue/"><img src="/en/gallery/thumbnails/aws/lambda.png" alt="AWS client getaddrinfo EMFILE issue"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-16T13:17:22.000Z">2024-05-16</time></p><p class="title"><a href="/en/2024/05/16/AWS-client-getaddrinfo-EMFILE-issue/">AWS client getaddrinfo EMFILE issue</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/"><img src="/en/gallery/thumbnails/2024/sqs.png" alt="How to prevent duplicate SQS messages"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-10T21:52:05.000Z">2024-05-11</time></p><p class="title"><a href="/en/2024/05/11/How-to-prevent-duplicate-SQS-messages/">How to prevent duplicate SQS messages</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/en/2020/02/14/novice/cache-memory-issue/"><img src="/en/gallery/thumbnails/troubleshooting.jpg" alt="A bug which should have been solved a week ago"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-02-14T11:05:00.000Z">2020-02-14</time></p><p class="title"><a href="/en/2020/02/14/novice/cache-memory-issue/">A bug which should have been solved a week ago</a></p><p class="categories"><a href="/en/categories/Explorations/">Explorations</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/en/tags/Serviceless/"><span class="tag">Serviceless</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/AWS/"><span class="tag">AWS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/FE/"><span class="tag">FE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Client/"><span class="tag">Client</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Amazon-connect/"><span class="tag">Amazon connect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/DynamoDB/"><span class="tag">DynamoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/SQS-Processor/"><span class="tag">SQS Processor</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/en/tags/Auth0/"><span class="tag">Auth0</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/en/"><img src="/en/gallery/site/logo.png" alt="Fedeoo&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Fedeoo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/en/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/en/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/en/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/en/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/en/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>